<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button style="color: black;"></ion-back-button>
    </ion-buttons>
    <ion-title>{{title}}</ion-title>
    <ion-buttons class="right-btn" *ngIf="title != 'Register'" (click)="editClick()" slot="end">
      <ion-icon *ngIf="!needToEdit" name="md-create"></ion-icon>
      <ion-icon *ngIf="needToEdit" name="md-close"></ion-icon>
    </ion-buttons>
  </ion-toolbar>

</ion-header>

<ion-content>
  <div class="logo-content-smaller">
    <img src="assets/logo/logo.png" />
    <h2>HR MANAGMENT</h2>
  </div>


  <ion-list>
    <div *ngIf="needToEdit">
      <form [formGroup]="registerForm" (submit)="saveUser()">
        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">First Name</ion-label>
          <ion-input formControlName="first_name" type="text"></ion-input>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.first_name.valid && (registerForm.get('first_name').dirty || registerForm.get('first_name').touched)">
            <div class="error-message">
              ✖︎ First Name is required 🙁
            </div>
          </ng-container>
        </div>

        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">Last Name</ion-label>
          <ion-input class="label-text-color" formControlName="last_name" type="text"></ion-input>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.last_name.valid && (registerForm.get('last_name').dirty || registerForm.get('last_name').touched)">
            <div class="error-message">
              ✖︎ Last Name is required 🙁
            </div>
          </ng-container>
        </div>

        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">Gender</ion-label>
          <ion-select formControlName="gender">
            <ion-select-option value="female">Female</ion-select-option>
            <ion-select-option value="male">Male</ion-select-option>
          </ion-select>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.gender.valid && (registerForm.get('gender').dirty || registerForm.get('gender').touched)">
            <div class="error-message">
              ✖︎ Gender is required 🙁
            </div>
          </ng-container>
        </div>


        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">Date of Birth</ion-label>
          <ion-datetime formControlName="dob" display-format="MMM DD, YYYY"></ion-datetime>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.dob.valid && (registerForm.get('dob').dirty || registerForm.get('dob').touched)">
            <div class="error-message">
              ✖︎ Date of Birth is required 🙁
            </div>
          </ng-container>
        </div>

        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">Email</ion-label>
          <ion-input class="label-text-color" formControlName="email" type="email"></ion-input>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.email.valid && (registerForm.get('email').dirty || registerForm.get('email').touched)">
            <div class="error-message">
              ✖︎ Please Enter your email with proper format 🙁
            </div>
          </ng-container>
        </div>

        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">Mobile Number</ion-label>
          <ion-input class="label-text-color" formControlName="phone" type="text"></ion-input>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.phone.valid && (registerForm.get('phone').dirty || registerForm.get('phone').touched)">
            <div class="error-message">
              ✖︎ Mobile Number is required 🙁
            </div>
          </ng-container>
        </div>

        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">Address</ion-label>
          <ion-input class="label-text-color" formControlName="address" type="text"></ion-input>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.address.valid && (registerForm.get('address').dirty || registerForm.get('address').touched)">
            <div class="error-message">
              ✖︎ Address is required 🙁
            </div>
          </ng-container>
        </div>


        <ion-item class="margin-top-item-spacing">
          <ion-label color="secondary" position="floating">Status</ion-label>
          <ion-select formControlName="status">
            <ion-select-option value="active">Active</ion-select-option>
            <ion-select-option value="inactive">Inactive</ion-select-option>
          </ion-select>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngIf="!registerForm.controls.status.valid && (registerForm.get('status').dirty || registerForm.get('status').touched)">
            <div class="error-message">
              ✖︎ Status is required 🙁
            </div>
          </ng-container>
        </div>
      </form>

    </div>


    <div *ngIf="!needToEdit">
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Fist Name</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.first_name}}</ion-label>
      </ion-item>
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Last Name</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.last_name}}</ion-label>
      </ion-item>
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Gender</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.gender}}</ion-label>
      </ion-item>
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Date of Birth</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.dob}}</ion-label>
      </ion-item>
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Email</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.email}}</ion-label>
      </ion-item>
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Mobile Number</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.phone}}</ion-label>
      </ion-item>
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Address</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.address}}</ion-label>
      </ion-item>
      <ion-item class="margin-top-item-spacing">
        <ion-label color="secondary">Status</ion-label>
        <ion-label class="label-text-color"> {{selectedItem?.status}}</ion-label>
      </ion-item>
    </div>

    <ng-container *ngIf="!offline else funcDisabled">
      <div *ngIf="title == 'Register'" class="margin-top-spacing">
        <ion-button (click)="registerBtn()" color="primary" [disabled]="!registerForm.valid" expand="block">Register</ion-button>
      </div>
      <div *ngIf="title != 'Register'" class="margin-top-spacing">
        <ion-button (click)="deleteBtn()" color="danger" expand="block">Delete</ion-button>
        <ion-button *ngIf="needToEdit" (click)="editBtn()" color="primary" [disabled]="!registerForm.valid" expand="block">Edit</ion-button>
      </div>
    </ng-container>

    <ng-template #funcDisabled>
      <div class="margin-top-spacing">
        <span style="font-weight:bold;">Your Currently Offline 📡</span>
      </div>
    </ng-template>

  </ion-list>


</ion-content>